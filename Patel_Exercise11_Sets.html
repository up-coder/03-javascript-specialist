<!DOCTYPE html>
<html>
    <head>
        <title>Exercise 11. ES6 Sets</title>
    </head>
    
    <body>
        <h1>Let's Play Bingo</h1>
        <p>Click the first button to call the next random number.<br/>Click the second button to call BINGO and check your winning numbers.</p>
        <button id="btnToCallNextNumber">Next Random Number</button>
        <button id="btnToCallBingo">Call Bingo</button><br/>
        <div id="outputNumber"></div> <!--div to output the randomly called number-->
        
        
        
        <script>
            //declares a constant for the random number picker button
            const RANDNUMBUTTON = document.getElementById('btnToCallNextNumber');
            //declares a constant for the call bingo button
            const CALLBINGOBUTTON = document.getElementById('btnToCallBingo');
            
            let winningNumbers = ""; //declare an empty variable to use to alert out winning numbers
            
            let bingoNumbers = new Set(); //this is a new Set to store all called numbers
            
            let numbers = new Set(); //create an empty Set called numbers
            
            //function to clear bingoNumbers Set and reset numbers to full Set of elements
            function initNumbers() {
            winningNumbers = "";
            bingoNumbers.clear();
            numbers.clear();
            numbers
            .add("B1")
            .add("B2")
            .add("B3")
            .add("B4")
            .add("B5")
            .add("B6")
            .add("B7")
            .add("B8")
            .add("B9")
            .add("B10")
            .add("B11")
            .add("B12")
            .add("B13")
            .add("B14")
            .add("B15")
            .add("I16")
            .add("I17")
            .add("I18")
            .add("I19")
            .add("I20")
            .add("I21")
            .add("I22")
            .add("I23")
            .add("I24")
            .add("I25")
            .add("I26")
            .add("I27")
            .add("I28")
            .add("I29")
            .add("I30")
            .add("N31")
            .add("N32")
            .add("N33")
            .add("N35")
            .add("N35")
            .add("N36")
            .add("N37")
            .add("N38")
            .add("N39")
            .add("N40")
            .add("N41")
            .add("N42")
            .add("N43")
            .add("N44")
            .add("N45")
            .add("G46")
            .add("G47")
            .add("G48")
            .add("G49")
            .add("G50")
            .add("G51")
            .add("G52")
            .add("G53")
            .add("G54")
            .add("G55")
            .add("G56")
            .add("G57")
            .add("G58")
            .add("G59")
            .add("G60")
            .add("O61")
            .add("O62")
            .add("O63")
            .add("O64")
            .add("O65")
            .add("O66")
            .add("O67")
            .add("O68")
            .add("O69")
            .add("O70")
            .add("O71")
            .add("O72")
            .add("O73")
            .add("O74")
            .add("O75");
            }
            
            //function call to resetNumbers
            initNumbers();
            
            
            //the following takes places when the next random number button is clicked
            RANDNUMBUTTON.onclick = function()
            {
                let randNumberIndex = Math.floor(Math.random() * numbers.size);
                if(numbers.size > 0)
                    {
                        //alert(numbers.size); //check to see how many elements remaining in numbers Set
                        let cntr = 0;
                        for (let key of numbers.keys()) 
                        {
                            if (cntr++ === randNumberIndex)
                                {
                                    //display the random number in outputRandomNumber div
                                    document.getElementById('outputNumber').innerHTML = "<h2>The next number is: " + key + "</h2>";
                                    //adds the random number to the new Set bingoNumbers
                                    bingoNumbers.add(key);
                                    
                                    //deletes the random number called from the numbers Set so it is not called again until game is reset
                                    numbers.delete(key);
                                    
                                }
                        }
                    } else {
                        alert("There are no more numbers left in the Set. Please call Bingo to reset the game!");
                    }
                
                
            }
            
            
            //the following takes places when the call bingo button is clicked
            CALLBINGOBUTTON.onclick = function()
            {
                if(bingoNumbers.size > 0)
                {
                    //use for...of loop to iterate through the values of bingoNumbers Set
                    for(let calledNum of bingoNumbers.values())
                    {
                        winningNumbers += calledNum + ", ";
                    }
                    //removes last comma from list of winning numbers
                    winningNumbers = winningNumbers.replace(/,\s*$/, "");

                    //outputs winning numbers in an alert
                    document.getElementById('outputNumber').innerHTML = "<h2>The winning Bingo numbers are: " + winningNumbers + "</h2>Click the Next Random Number button to start again.";


                    //reset both bingoNumbers and numbers Sets to initial states
                    initNumbers();
                } else {
                    alert("You can't have won yet, no numbers have been called.  Click the Next Random Number button to start.");
                }
                
            }
            
       </script>
    </body>
</html>